@model IEnumerable<news_feed.Models.News>

@{
    ViewData["Title"] = "Index";
}

<label for="feeds">Choose a News feed:</label>

<select name="feeds" id="feeds" onchange="toggleFeedSelection()" class="custom-select select">
    <option value=0>All feeds</option>
    @foreach (var item in Model.Select(x => x.NewsFeed).Distinct())
    {
        <option value=@item.Id>@item.Name</option>
    }
</select>

<button class="button">Subsbcribe</button>

@foreach (var item in Model)
{
    <div class="card feed-@item.NewsFeed.Id" id="news-@item.Id" asp-action="Details" asp-route-id="@item.Id">
        <p>
            @item.NewsFeed.Name - @item.Timestamp.ToString("MM/dd/yyyy")
        </p>
        <a asp-action="Details" asp-route-id="@item.Id">
            <h2>
                @item.Title
            </h2>
        </a>
    </div>
}
@section scripts {
    <script type="text/javascript">
        function toggleFeedSelection() {
            var select = document.getElementById("feeds")
            var allCards = document.getElementsByClassName("card");
            var selectedCards = document.getElementsByClassName("feed-" + select.value);

            if (select.value === "0") {
                changeDisplayOfElements(allCards, 'block');
            }
            else {
                changeDisplayOfElements(allCards, 'none');
                changeDisplayOfElements(selectedCards, 'block');
            }
        }

        function changeDisplayOfElements(elements, display) {
            for (i = 0; i < elements.length; i++) {
                elements[i].style.display = display;
            }
        }

    </script>
}